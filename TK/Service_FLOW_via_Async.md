### | 게임 매칭 방식 : 랜덤 매칭 그리고 비동기 처리 

아래 <그림 1>에서 **게임 찾기** 버튼을 클릭 시, 해당 유저는 게임 찾기 대기 큐에 등록되고 해당 큐에 등록된 유저 중 랜덤하게 지정된 상대 유저와 오목 게임을 할 수 있다. 현재는 랜덤 방식으로 상대를 지정하지만, 승률 조건을 추가할 예정이다. (= '나'와 승률이 비슷한 유저와 매칭) 

![image-20210523221300877](./imgs/game-search-flow0.png)

​											 <그림 1> 

비동기 방식으로 게임 매칭 요청을 다루는 이유는 다음과 같다. 만약 동기적으로 게임 찾기 요청을 처리하게 되면, 매칭이 성공하기 전까지 클라이언트는 계속 응답을 기다리는 (대기)상태가 되고, 이 때 Blocking 되어 다른 요청(가령 게임 매칭 요청 취소)와 같은 요청을 보낼 수 없다. 비동기 방식은 반면, 게임 매칭 요청에 대해서 게임 매칭 성공이 되는 시점에 응답을 함으로써 위 문제를 해결할 수 있고, 클라이언트는 요청을 보낸 시점에서 서버의 응답을 기다리는 동안 다른 작업도 가능해진다. (= 게임 찾기 취소 등, Non-Blocking)

___

### | 게임 매칭 Flow :

![image-20210523221300877](./imgs/game-search-flow1.png)

1. **로그인**
   * 로그인 성공 시 메인 페이지로 이동 
   * 메인 페이지에서 유저의 정보를 불러오기 위한 API 요청 
     * 유저 고유 ID 
     * 유저 닉네임
     * 유저 승률 (추후 보안 시 활용, 현재는 회원가입 할 때 기입 받은 유저의 오목 수준 (하수/중수/고수 기준 활용))
2. **게임 찾기** 버튼 클릭 시 <그림 1> 오른쪽과 같이 **게임 찾는 중** 상태가 된다.  
   - 게임 매칭 전, 유저가 **취소** 버튼을 클릭하는 경우 : 다시 메인 화면으로 이동  
   - 게임 매칭을 유저의 요청 시간 기준으로 N분 경과 : 다시 메인 화면으로 이동 (예외 처리)
   - 서버 측 예외 상황 발생 : 다시 메인 화면으로 이동 (예외 처리)
3. **게임 매칭 성공 시**, 게임을 위한 초기화 진행 
   - 오목판 활성화
   - 어떤 유저가 흑(또는 백)인 지 안내 
   - 상대 유저 정보 (<u>닉네임</u>) 출력 
4. **게임 종료** 시점에 아래 두 옵션 
   - 게임 찾기 : 게임 종료 후 바로 게임 매칭 찾기 요청 
   - 복기 하기 : 종료된 게임에 대한 복기를 할 수 있는 페이지로 이동 